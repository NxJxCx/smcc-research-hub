import{CellAlign as e,Table as t,TableCellType as l,TableRowAction as r}from"/jsx/admin/table";import{React as n,Sweetalert2 as a}from"/jsx/imports";const o=[{label:"Teacher ID",key:"personnel_id",sortable:!0,filterable:!0,cellType:l.Number,align:e.Center},{label:"Full Name",key:"full_name",sortable:!0,cellType:l.String,align:e.Center},{label:"Email Address",key:"email",sortable:!0,cellType:l.String,align:e.Center},{label:"Department",key:"department",sortable:!0,cellType:l.String,align:e.Center},{label:"Date Registered",key:"created_at",sortable:!0,cellType:l.Date,align:e.Center},{label:"Action",key:"action",sortable:!1,cellType:l.Custom,align:e.Center}];function c(){const[e,l]=n.useState([]),c=()=>{fetch("/api/teacher/all").then((e=>e.json())).then((({success:e,error:t})=>{t?console.log(t):l(e.map((e=>({id:e.personnel_id,personnel_id:e.personnel_id,created_at:e.created_at,full_name:e.full_name,email:e.email,department:e.department,action:n.createElement(r,{id:e.id,onEdit:t=>{e.id},onDelete:e=>{a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete teacher account!"}).then((({isConfirmed:t})=>{t&&fetch(`/api/teacher/delete?id=${e}`,{method:"DELETE"}).then((e=>e.json())).then((({success:e,error:t})=>{e?(c(),a.fire({icon:"success",title:"Deleted!",text:"Teacher account has been deleted successfully.",timer:3e3})):(console.log(t),a.fire({icon:"error",title:"Error",text:"Failed to delete teacher account: "+t,confirmButtonText:"Try Again"}))})).catch((e=>{console.log(e),a.fire({icon:"error",title:"Error",text:"Failed to delete teacher account",timer:3e3})}))}))}})}))))})).catch((e=>{console.log(e),a.fire({icon:"error",title:"Error",text:"Failed to fetch teacher list",confirmButtonText:"Try Again",showCancelButton:!0}).then((({isConfirmed:e})=>{e&&setTimeout((()=>c()),50)}))}))};return n.useEffect((()=>{c()}),[]),n.createElement("div",{className:"w-full min-h-[calc(100vh-160px)] h-fit bg-[#37414e] p-4 "},n.createElement("h1",{className:"text-white text-2xl my-2"},"Teacher List"),n.createElement(t,{columns:o,items:e},n.createElement("div",{className:"px-4"},n.createElement("button",{type:"button",onClick:()=>c(),className:"hover:text-yellow-500",title:"Refresh List"},n.createElement("span",{className:"material-symbols-outlined"},"refresh")))))}export default c;