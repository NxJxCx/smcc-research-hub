export default import(pathname("/jsx/imports")).then((async({React:e,Sweetalert2:t,clsx:a,getAsyncImport:l})=>{const{default:{Input:n,Select:r}}=await l("/jsx/global/input"),{default:o}=await l("/jsx/global/modal");return function({open:l,defaultOpen:s,className:i="",onClose:m=()=>{},onSuccess:u=()=>{}}){const[c,d]=e.useState(void 0===l?s||!1:l),[p,b]=e.useState(""),[x,f]=e.useState("January"),[g,h]=e.useState((new Date).getFullYear().toString()),[w,v]=e.useState(""),[y,E]=e.useState(""),[N,C]=e.useState(""),[S,k]=e.useState(),[j,J]=e.useState(),[B,F]=e.useState(!1),[M,O]=e.useState(0),[D,T]=e.useState(null),A=e.useMemo((()=>Array.from({length:500},((e,t)=>(new Date).getFullYear()-t)).map((e=>({label:e.toString(),value:e.toString()})))),[]),q=e.useMemo((()=>0!==M),[M]);e.useEffect((()=>{void 0!==l&&(d(l),l||m&&m())}),[l]);const z=e.useCallback((()=>{void 0===l&&d(!1),m&&m()}),[l,m]),P=e.useCallback((()=>{S&&F(!0)}),[S]);e.useEffect((()=>{if(S){const e=new Blob([S],{type:S.type}),t=URL.createObjectURL(e);return J(t),()=>{URL.revokeObjectURL(t),J(null)}}}),[S]);const R=e.useCallback((e=>{if(e.preventDefault(),!S)return void t.fire({icon:"warning",text:"Please upload Journal Thumbnail in Image format.",toast:!0,timer:2e3,showConfirmButton:!1,position:"center"});const a=new FormData;a.append("document","journal"),a.append("title",p),a.append("month",x),a.append("year",g),a.append("volume",w),a.append("number",y),a.append("published_date",N),a.append("thumbnail",new Blob([S],{type:S.type}),S.name),console.log(Object.fromEntries(a));const l=new XMLHttpRequest;T(l),l.open("POST","/api/upload/journal",!0),l.upload.onprogress=e=>{if(e.lengthComputable){const t=e.loaded/e.total*100;O(t)}},l.onload=()=>{if(201===l.status){const e=JSON.parse(l.responseText);e.error?(t.fire({icon:"error",title:"Failed to upload Image file",text:e.error,toast:!0,timer:2e3,showConfirmButton:!1,position:"center"}),O(0)):(t.fire({icon:"success",title:"Success",text:"Journal Created successfully.",toast:!0,timer:2e3,showConfirmButton:!1,position:"center"}),k(null),b(""),f("January"),h((new Date).getFullYear().toString()),C(""),v(""),E(""),u&&u(),O(0),z())}else t.fire({icon:"error",title:"Failed to upload Image file",text:JSON.parse(l.responseText)?.error,toast:!0,timer:2e3,showConfirmButton:!1,position:"center"}),O(0)},l.onerror=e=>{t.fire({icon:"error",title:"Failed to upload Image file",text:JSON.parse(l.responseText)?.error,toast:!0,timer:2e3,showConfirmButton:!1,position:"center"}),O(0)},l.send(a)}),[S,p,x,y,w,g,N,u]),I=()=>{D&&(D.abort(),O(0),T(null),t.fire({icon:"info",title:"Upload Cancelled",text:"The file upload has been cancelled.",toast:!0,timer:2e3,showConfirmButton:!1,position:"center"}))};return e.createElement(e.Fragment,null,e.createElement("div",{className:a("max-w-[500px] min-w-[400px] bg-[#252e38] pt-4 px-4 rounded-lg border border-[#45515F] z-20",c?"block":"hidden",i)},e.createElement("form",{onSubmit:R},e.createElement("div",{className:"flex flex-wrap justify-center items-center gap-3"},e.createElement(n,{className:"max-w-[180px] text-black",label:"Journal Title",name:"title",value:p,onChange:e=>b(e.target.value),disabled:q,required:!0}),e.createElement(r,{className:"max-w-[180px] text-black",items:[{label:"January",value:"January"},{label:"February",value:"February"},{label:"March",value:"March"},{label:"April",value:"April"},{label:"May",value:"May"},{label:"June",value:"June"},{label:"July",value:"July"},{label:"August",value:"August"},{label:"September",value:"September"},{label:"October",value:"October"},{label:"November",value:"November"},{label:"December",value:"December"}],label:"Month",name:"month",value:x,onChange:e=>f(e.target.value),disabled:q,required:!0}),e.createElement(n,{type:"number",min:1,className:"max-w-[180px] text-black",label:"Volume",name:"volume",value:w,onChange:e=>v(e.target.value),disabled:q,required:!0}),e.createElement(n,{type:"number",min:1,className:"max-w-[180px] text-black",label:"No.",name:"number",value:y,onChange:e=>E(e.target.value),disabled:q,required:!0}),e.createElement(r,{className:"max-w-[180px] text-black",items:A,label:"Year",name:"year",value:g,onChange:e=>h(e.target.value),disabled:q,required:!0}),e.createElement(n,{type:"date",className:"max-w-[180px] text-black",label:"Published Date",name:"published_date",value:N,onChange:e=>C(e.target.value),disabled:q,required:!0})),e.createElement("div",{className:"flex items-center justify-center w-full px-4 mt-4"},e.createElement("label",{htmlFor:"dropzone-file",className:a("flex flex-col items-center justify-center w-full h-32 border border-gray-500 border-dashed rounded-lg cursor-pointer",S?"hidden":"")},e.createElement("div",{className:"flex flex-col items-center justify-center"},e.createElement("svg",{className:"w-8 h-8 mb-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16"},e.createElement("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})),e.createElement("p",{className:"mb-2 text-sm text-white"},e.createElement("span",{className:"font-semibold"},"Click to upload")," or drag and drop"),e.createElement("p",{className:"text-xs text-gray-500"},"PNG, JPG, JPEG (MAX 3MB)")),e.createElement("input",{id:"dropzone-file",type:"file",className:"hidden",name:"thumbnail",accept:".png, .jpg, .jpeg",value:"",onChange:e=>{const a=e.target.files?.[0];a&&a.size>3145728?(t.fire({icon:"warning",text:"File size exceeds the maximum limit of 3MB.",toast:!0,timer:2e3,showConfirmButton:!1,position:"center"}),e.target.value=""):k(a)}})),!!S&&e.createElement("div",{className:"border border-gray-500 border-dashed p-4 rounded-lg w-full h-32 flex items-center justify-center"},e.createElement("div",{className:"flex justify-between border border-white p-3 rounded gap-x-3 items-center"},e.createElement("span",{className:"text-white material-symbols-outlined"},"upload_file"),e.createElement("button",{type:"button",onClick:P},e.createElement("span",{className:"text-md text-white"},S.name)),e.createElement("div",null,e.createElement("span",{className:"text-md text-gray-500"},(S.size/1024/1024).toFixed(2)," MB")),e.createElement("div",null,e.createElement("button",{type:"button",onClick:()=>k(null),disabled:q,className:"disabled:text-gray-500 disabled:hover:text-gray-500  disabled:cursor-not-allowed hover:text-red-600 text-red-400",title:"Remove"},e.createElement("span",{className:"material-symbols-outlined"},"cancel")))))),M>0&&e.createElement("div",{className:"w-full px-4 mt-4"},e.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2.5"},e.createElement("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${M}%`}})),e.createElement("p",{className:"text-white text-center mt-2"},M.toFixed(2),"%"),e.createElement("button",{type:"button",onClick:I,className:"bg-red-500 rounded-2xl px-4 py-1 text-white shadow-lg mt-2"},"Cancel Upload")),e.createElement("div",{className:"w-full py-2 flex justify-between items-center mt-2 px-4"},e.createElement("button",{type:"submit",disabled:q,className:"bg-sky-500 rounded-2xl px-4 py-1 text-white shadow-lg disabled:cursor-not-allowed disabled:bg-gray-400"},q?"Submitting...":"Submit"),e.createElement("button",{type:"reset",onClick:()=>{q?(I(),z()):z()},className:"bg-[#333D49] rounded-2xl px-4 py-1 text-white"},"Cancel")))),e.createElement(o,{open:B,content:e.createElement("img",{src:j,alt:"Thumbnail",className:"max-h-[720px] max-w-[480px] aspect-auto object-contain mx-auto border shadow mt-2"}),onClose:()=>F(!1),showCancelButton:!1,showConfirmButton:!1,header:`Journal Thumbnail Preview (${S?.name}) ${((S?.size||0)/1024/1024).toFixed(2)}MB`}))}}));