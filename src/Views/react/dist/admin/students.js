export default import(pathname("/jsx/imports")).then((async({React:e,Sweetalert2:t,getAsyncImport:a})=>{const{CellAlign:l,Courses:n,Departments:r,TableCellType:o,TableColumn:s,Year:c}=await import(pathname("/jsx/types")),{default:{Input:i,Select:u}}=await a("/jsx/global/input"),{default:m}=await a("/jsx/global/modal"),{Table:d,TableRowAction:b}=await a("/jsx/admin/table"),p=[{label:"Student ID",key:"student_id",sortable:!0,filterable:!0,cellType:o.Number,align:l.Center},{label:"Full Name",key:"full_name",sortable:!0,cellType:o.String,align:l.Center},{label:"Email Address",key:"email",sortable:!0,cellType:o.String,align:l.Center},{label:"Department",key:"department",sortable:!0,cellType:o.String,align:l.Center},{label:"Course",key:"course",sortable:!0,cellType:o.String,align:l.Center},{label:"Year",key:"year",sortable:!0,cellType:o.Number,align:l.Center},{label:"Date Registered",key:"created_at",sortable:!0,cellType:o.Date,align:l.Center},{label:"Action",key:"action",sortable:!1,cellType:o.Custom,align:l.Center}];function C({formData:t,onChange:a}){return e.createElement("div",{className:"p-8"},e.createElement(i,{disabled:!0,label:"Student ID",inputClassName:"border-black",className:"mb-2",labelColor:"black",name:"edit_student_id",placeholder:"Student ID",value:t.username,onChange:e=>a({...t,username:e.target.value})}),e.createElement(i,{disabled:!0,label:"Full Name",inputClassName:"border-black",className:"mb-2",labelColor:"black",name:"edit_full_name",placeholder:"Full Name",value:t.full_name,onChange:e=>a({...t,full_name:e.target.value}),required:!0}),e.createElement(i,{type:"email",label:"Email Address",inputClassName:"border-black",className:"mb-2",labelColor:"black",name:"edit_email",placeholder:"Email Address",value:t.email,onChange:e=>a({...t,email:e.target.value}),required:!0}),e.createElement(u,{labelColor:"black",items:Object.entries(r).map((([e,t])=>({label:t,value:t}))),label:"Department",name:"edit_department",placeholder:"Department",value:t.department,onChange:e=>a({...t,department:e.target.value}),required:!0}),e.createElement(u,{labelColor:"black",items:Object.entries(n).map((([e,t])=>({label:t,value:t}))),label:"Course",name:"edit_course",placeholder:"Course",value:t.course,onChange:e=>a({...t,course:e.target.value}),required:!0}),e.createElement(u,{labelColor:"black",items:Object.entries(c).map((([e,t])=>({label:t,value:t}))),label:"Year",name:"edit_year",placeholder:"Year",value:t.year,onChange:e=>a({...t,year:e.target.value}),required:!0}),e.createElement(i,{type:"password",label:"Password",inputClassName:"border-black",className:"mb-2",labelColor:"black",name:"edit_password",placeholder:"Password (Leave blank if not change)",value:t.password,onChange:e=>a({...t,password:e.target.value})}))}return function(){const[a,l]=e.useState([]),[o,s]=e.useState({account:"student",username:"",full_name:"",email:"",password:"",department:r.CCIS,course:n.BSIT,year:c.FirstYear}),i=e.useCallback((()=>{s({account:"student",username:"",full_name:"",email:"",password:"",department:r.CCIS,course:n.BSIT,year:c.FirstYear})}),[]),[u,h]=e.useState(!1),f=e.useCallback((e=>{s({account:"student",username:e.student_id,full_name:e.full_name,email:e.email,password:"",department:e.department,course:e.course,year:e.year}),h(!0)}),[]),g=()=>{fetch(pathname("/api/student/all")).then((e=>e.json())).then((({success:a,error:n})=>{n?console.log(n):l(a.map((a=>({student_id:a.student_id,created_at:a.created_at,full_name:a.full_name,email:a.email,year:a.year,department:a.department,course:a.course,action:e.createElement(b,{id:a.student_id,onEdit:e=>{e===a.student_id&&f(a)},onDelete:e=>{console.log("ON DELETE STUDENT ID:",e),t.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete student account!"}).then((({isConfirmed:a})=>{a&&fetch(pathname(`/api/student/delete?id=${e}`),{method:"DELETE"}).then((e=>e.json())).then((({success:e,error:a})=>{e?(g(),t.fire({icon:"success",title:"Deleted!",text:"Student account has been deleted successfully.",timer:3e3})):(console.log(a),t.fire({icon:"error",title:"Error",text:"Failed to delete student account: "+a,confirmButtonText:"Try Again"}))})).catch((e=>{console.log(e),t.fire({icon:"error",title:"Error",text:"Failed to delete student account",timer:3e3})}))}))}})}))))})).catch((e=>{console.log(e),t.fire({icon:"error",title:"Error",text:"Failed to fetch student list",confirmButtonText:"Try Again",showCancelButton:!0}).then((({isConfirmed:e})=>{e&&setTimeout((()=>g()),50)}))}))};e.useEffect((()=>{g()}),[]);const y=e.useCallback((async e=>{console.log(o);try{const a=await fetch(pathname("/api/update"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),l=await a.json();l.success?(e(),i(),t.fire({icon:"success",title:"Success",text:"Student account has been updated successfully.",timer:3e3}),setTimeout((()=>g()),100)):t.fire({icon:"error",title:"Failed",text:l.error})}catch(a){console.log(a),t.fire({icon:"error",title:"Error",text:"Failed to update student account",confirmButtonText:"Try Again",showCancelButton:!0}).then((({isConfirmed:t})=>{t&&setTimeout((()=>y(e)),100)}))}}),[o]);return e.createElement(e.Fragment,null,e.createElement("div",{className:"w-full min-h-[calc(100vh-160px)] h-fit bg-[#37414e] p-4 min-w-fit"},e.createElement("h1",{className:"text-white text-2xl my-2"},"Student List"),e.createElement(d,{columns:p,items:a},e.createElement("div",{className:"px-4"},e.createElement("button",{type:"button",onClick:()=>g(),className:"hover:text-yellow-500",title:"Refresh List"},e.createElement("span",{className:"material-symbols-outlined"},"refresh"))))),e.createElement(m,{open:u,header:"Edit Student Account",content:e.createElement(C,{formData:o,onChange:s}),onConfirm:y,onCancel:i,onClose:()=>h(!1)}))}}));