import e from"/jsx/global/clsx";import{React as t}from"/jsx/imports";var s;!function(e){e.USER_INFO="USER INFO",e.USER_ERROR="USER ERROR",e.USER_WARNING="USER WARNING",e.USER_DEBUG="USER DEBUG"}(s||(s={}));export default function l(){const[l,a]=t.useState([]),r=t.useRef(null),n=t.useCallback((()=>{fetch("/api/logs").then((e=>e.json())).then((({data:e})=>{const t=e.split("\n").reduce(((e,t,l,a)=>{const r=t.substring(1).split("] ");return Object.values(s).includes(r[0])?[...e,{type:r[0],message:r[1]+"] "+r[2]}]:[...e,{type:"",message:t}]}),[]).filter((e=>!(!e.type&&!e.message)));a(t),setTimeout((()=>{r.current?.scroll({top:r.current?.scrollHeight})}),15)}))}),[r]);return t.useEffect((()=>{n()}),[]),t.useEffect((()=>{setTimeout((()=>{n()}),1e3)}),[l]),t.createElement("div",null,t.createElement("h1",{className:"p-8 text-2xl pb-0"},"Server Logs"),t.createElement("div",{className:"w-full p-8"},t.createElement("div",{ref:r,className:"bg-slate-900 p-3 text-white border border-white rounded shadow mx-auto h-full max-h-[calc(100vh-250px)] overflow-x-hidden overflow-y-auto"},l.map((({type:l,message:a},r)=>t.createElement("p",{key:r,className:"text-wrap"},t.createElement("span",{className:e(l===s.USER_INFO?"text-green-300":l===s.USER_ERROR?"text-red-500":l===s.USER_WARNING?"text-yellow-400":l===s.USER_DEBUG?"text-gray-500":"text-gray-400")},l,l!==s.NONE&&": "),"Â ",t.createElement("span",null,a)))))))}