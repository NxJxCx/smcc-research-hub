import e from"/jsx/global/clsx";import{React as t}from"/jsx/imports";var l;!function(e){e.USER_INFO="USER INFO",e.USER_ERROR="USER ERROR",e.USER_WARNING="USER WARNING",e.USER_DEBUG="USER DEBUG",e.NONE=""}(l||(l={}));export default function s(){const[s,a]=t.useState([]),r=t.useRef(null),n=t.useCallback((()=>{fetch("/api/logs").then((e=>e.json())).then((({data:e})=>{console.log("DATA:",e);const t=e.split("\n").reduce(((e,t,s,a)=>{const[r,n]=t.substring(1).split("] ");return Object.values(l).includes(r)?[...e,{type:r,message:n}]:[...e,{type:l.NONE,message:t}]}),[]).filter((e=>!!e.message));a(t),setTimeout((()=>{r.current?.scroll({top:r.current?.scrollHeight})}),15)}))}),[r]);return t.useEffect((()=>{n()}),[]),t.createElement("div",null,t.createElement("h1",{className:"p-8 text-2xl pb-0"},"Server Logs"),t.createElement("div",{className:"w-full p-8"},t.createElement("div",{ref:r,className:"bg-slate-900 p-3 text-white border border-white rounded shadow mx-auto h-full max-h-[calc(100vh-250px)] overflow-x-hidden overflow-y-auto"},s.map((({type:s,message:a},r)=>t.createElement("p",{key:r,className:"text-wrap"},t.createElement("span",{className:e(s===l.USER_INFO?"text-green-300":s===l.USER_ERROR?"text-red-500":s===l.USER_WARNING?"text-yellow-400":s===l.USER_DEBUG?"text-gray-500":"text-gray-400")},s,s!==l.NONE&&": "),"Â ",t.createElement("span",null,a)))))))}