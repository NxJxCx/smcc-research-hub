export default import(pathname("/jsx/imports")).then((async({React:e,Sweetalert2:t,getAsyncImport:a})=>{const{Year:r,DepartmentCourses:l}=await import(pathname("/jsx/types")),{IDRegExFormat:n}=await import(pathname("/jsx/global/enums")),{default:o}=await a("/jsx/global/smcclogo"),{default:s}=await a("/jsx/qrscan");return function(){const a=e.useMemo((()=>new URLSearchParams(window.location.search)),[window.location.search]),{student_id:i,full_name:c}=e.useMemo((()=>({student_id:a.get("student_id"),full_name:a.get("full_name")})),[a]),m=e.useMemo((()=>!n.studentId.test(i)||!n.studentName.test(c)),[i,c]),[d,u]=e.useState(!1),[p,f]=e.useState(""),[g,x]=e.useState(""),[h,w]=e.useState(""),[y,b]=e.useState(""),[E,v]=e.useState(""),[N,C]=e.useState(""),[S,k]=e.useState(!1),[j,_]=e.useState({password:""}),q=e.useMemo((()=>l[y]||[]),[y]),R=e.useMemo((()=>m||!p||!g||!y||!E||!N),[m,p,g,y,E,N]),D=e.useCallback((()=>{x(""),w("")}),[]),B=e.useCallback(((e,a)=>{a&&(u(!0),fetch(`/api/student?q=exist&id=${a}`).then((e=>e.json())).then((({error:r,exists:l})=>{r?t.fire({icon:"error",title:"Error",text:"Failed to check student existence: "+r,toast:!0,showConfirmButton:!1,position:"center",timer:3e3}):l?t.fire({icon:"error",title:"Error",text:"Student ID is already registered",timer:2e3,toast:!0,position:"center",showConfirmButton:!1}).then((()=>{t.fire({icon:"question",text:"Do you want to login instead?",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"}).then((({isConfirmed:e})=>{e&&window.location.replace(`/login?student_id=${a}`)}))})):window.location.replace(`/signup?student_id=${a}&full_name=${e}`)})).catch((e=>{t.fire({icon:"error",title:"Error",text:"Failed to retrieve student information:"+e.message,toast:!0,showConfirmButton:!1,position:"center",timer:3e3})})).finally((()=>setTimeout((()=>u(!1)),1e3))))}),[]),F=e.useCallback((e=>{if(e.preventDefault(),k(!0),g!==h)return _({password:"Passwords do not match"}),t.fire({icon:"error",title:"Error",text:"Passwords do not match",toast:!0,showConfirmButton:!1,position:"center",timer:3e3}),void k(!1);fetch(pathname("/api/signup"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8",Accept:"application/json; charset=UTF-8"},body:JSON.stringify({account:"student",username:i,full_name:c,email:p,department:y,course:E,year:N,password:g})}).then((e=>e.json())).then((({error:e,success:a})=>{e?(t.fire({icon:"error",title:"Error",text:e,toast:!0,showConfirmButton:!1,position:"center",timer:3e3}),console.log(e)):a&&(D(),t.fire({icon:"success",title:"Registration Successful",text:"You have been registered successfully. Please login.",toast:!0,showConfirmButton:!1,position:"center",timer:2e3}).then((()=>{window.location.href=pathname("/login")})))})).catch((e=>{t.fire({icon:"error",title:"Error",text:"Failed to login. Please try again."}),console.log(e)})).finally((()=>{x(""),k(!1)}))}),[i,p,E,N,g,h]);return m?e.createElement("div",{className:"w-full pt-16 relative"},e.createElement("button",{type:"button",onClick:()=>window.location.replace(pathname("/")),className:"absolute top-0 left-0 ml-4 mt-4 text-sky-500 hover:text-sky-3 bg-white drop-shadow-lg pl-2 pr-3 py-1 rounded flex items-center"},e.createElement("span",{className:"material-symbols-outlined"},"arrow_left")," Home"),e.createElement("div",{className:"p-4"},e.createElement("div",{className:"max-w-md mx-auto flex flex-col gap-8 border border-sky-300 rounded-lg p-8 shadow-lg pt-10"},e.createElement(o,{className:"w-[100px] aspect-square mx-auto"}),e.createElement("div",{className:"text-[24px] font-[700] text-center"},"Student Registration"),e.createElement(s,{className:"mt-4",onResult:B,pause:d||!m,regExFormat:[n.studentName,n.studentId]})),e.createElement("div",{className:"mt-8 text-center font-bold"},"Scan your Student ID QR Code to Register",e.createElement("br",null),"Already registered? ",e.createElement("a",{href:pathname("/login"),className:"text-sky-500 hover:text-sky-300 hover:underline mt-2"},"Login")))):e.createElement("div",{className:"w-full pt-2 relative"},e.createElement("button",{type:"button",onClick:()=>window.location.replace(pathname("/")),className:"absolute top-0 left-0 ml-4 mt-4 text-sky-500 hover:text-sky-3 bg-white drop-shadow-lg pl-2 pr-3 py-1 rounded flex items-center"},e.createElement("span",{className:"material-symbols-outlined"},"arrow_left")," Home"),e.createElement("div",{className:"p-4"},e.createElement("form",{onSubmit:F,className:"max-w-md mx-auto flex flex-col gap-8 border border-sky-300 rounded-lg p-8 shadow-lg pt-10"},e.createElement(o,{className:"w-[100px] aspect-square mx-auto"}),e.createElement("div",{className:"text-[24px] font-[700] text-center"},"Student Registration"),e.createElement("div",{className:"flex justify-center px-4"},e.createElement("input",{type:"text",className:"p-4 w-full border-2 border-gray-300 rounded-lg",placeholder:"Student ID",value:i,disabled:!0,required:!0})),e.createElement("div",{className:"flex justify-center px-4"},e.createElement("input",{type:"text",className:"p-4 w-full border-2 border-gray-300 rounded-lg",placeholder:"Full Name",value:c,disabled:!0,required:!0})),e.createElement("div",{className:"flex justify-center px-4"},e.createElement("input",{type:"email",className:"p-4 w-full border-2 border-gray-300 rounded-lg",placeholder:"Email Address",value:p,onChange:e=>f(e.target.value),required:!0})),e.createElement("div",{className:"flex justify-center px-4"},e.createElement("select",{value:y,onChange:e=>{b(e.target.value),v("")},title:"Department",className:"p-4 w-full border-2 border-gray-300 rounded-lg bg-sky-50",required:!0},e.createElement("option",{value:""},"-- Select Department --"),Object.keys(l).map(((t,a)=>e.createElement("option",{key:"department_"+a,value:t},t))))),e.createElement("div",{className:"flex justify-center px-4"},e.createElement("select",{value:E,onChange:e=>v(e.target.value),title:"Course",className:"p-4 w-full border-2 border-gray-300 rounded-lg bg-sky-50",required:!0},e.createElement("option",{value:""},"-- Select Course --"),q.map(((t,a)=>e.createElement("option",{key:"course_"+a,value:t},t))))),e.createElement("div",{className:"flex justify-center px-4"},e.createElement("select",{value:N,onChange:e=>C(e.target.value),title:"Year",className:"p-4 w-full border-2 border-gray-300 rounded-lg bg-sky-50",required:!0},e.createElement("option",{value:""},"-- Select Year --"),Object.entries(r).map((([t,a])=>e.createElement("option",{key:t,value:a},"1"===a?"1st Year":"2"===a?"2nd Year":"3"===a?"3rd Year":"4th Year"))))),e.createElement("div",{className:"flex justify-center px-4"},e.createElement("input",{type:"password",className:"p-4 w-full border-2 border-gray-300 rounded-lg"+(j.password?" border-red-500":""),placeholder:"Password",value:g,onChange:e=>{x(e.target.value),_({password:""})},required:!0})),e.createElement("div",{className:"flex justify-center px-4"},e.createElement("input",{type:"password",className:"p-4 w-full border-2 border-gray-300 rounded-lg",placeholder:"Repeat Password",value:h,onChange:e=>{w(e.target.value),_({password:""})},required:!0})),e.createElement("div",{className:"flex justify-center px-4"},e.createElement("button",{type:"submit",disabled:S||R,className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 text-[22px] w-full disabled:bg-gray-300"},S?e.createElement("span",{className:"animate-pulse"},"Loading..."):e.createElement(e.Fragment,null,"Register")))),e.createElement("div",{className:"mt-8 text-center font-bold"},"Complete your registration with the details above",e.createElement("br",null),e.createElement("a",{href:pathname("/signup"),className:"text-sky-500 hover:text-sky-300 hover:underline mt-2"},"or Scan QR Code again if is not your Student ID"))))}}));